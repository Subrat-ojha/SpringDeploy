<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JavaCracker - Cheatsheet Gallery</title>
<style>
    /* General Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    :root {
        --primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --card-bg: rgba(255,255,255,0.95);
        --text-color: #333;
        --text-secondary: #666;
        --header-bg: rgba(255,255,255,0.1);
        --input-bg: rgba(255,255,255,0.9);
        --shadow: rgba(0,0,0,0.1);
        --modal-bg: rgba(0,0,0,0.9);
    }

    [data-theme="dark"] {
        --primary-bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        --card-bg: rgba(45,55,72,0.95);
        --text-color: #e2e8f0;
        --text-secondary: #a0aec0;
        --header-bg: rgba(0,0,0,0.2);
        --input-bg: rgba(45,55,72,0.9);
        --shadow: rgba(0,0,0,0.3);
        --modal-bg: rgba(0,0,0,0.95);
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: var(--primary-bg);
        min-height: 100vh;
        color: var(--text-color);
        transition: all 0.3s ease;
    }

    /* Header Styles */
    .header {
        background: var(--header-bg);
        backdrop-filter: blur(10px);
        padding: 1rem 0;
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
    }

    .logo {
        font-size: 1.5rem;
        font-weight: bold;
        color: white;
        text-decoration: none;
    }

    .logo span {
        color: #ffd700;
    }

    .nav {
        display: flex;
        gap: 2rem;
    }

    .nav a {
        color: white;
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .nav a:hover {
        color: #ffd700;
    }

    .auth {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .theme-checkbox {
        position: relative;
        width: 50px;
        height: 25px;
        appearance: none;
        background: rgba(255,255,255,0.2);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .theme-checkbox:before {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 21px;
        height: 21px;
        background: white;
        border-radius: 50%;
        transition: all 0.3s ease;
    }

    .theme-checkbox:checked:before {
        transform: translateX(25px);
        background: #ffd700;
    }

    .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .login {
        background: transparent;
        color: white;
        border: 1px solid white;
    }

    .signup {
        background: #ffd700;
        color: #333;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px var(--shadow);
    }

    .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
    }

    /* Main Content */
    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .page-header {
        text-align: center;
        margin-bottom: 40px;
        color: white;
    }

    .page-header h1 {
        font-size: 3rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .page-header p {
        font-size: 1.2rem;
        opacity: 0.9;
    }

    .controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        gap: 20px;
        flex-wrap: wrap;
    }

    .search-box {
        flex: 1;
        min-width: 300px;
    }

    .search-box input {
        width: 100%;
        padding: 15px 20px;
        border: none;
        border-radius: 50px;
        font-size: 16px;
        background: var(--input-bg);
        color: var(--text-color);
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px var(--shadow);
        transition: all 0.3s ease;
    }

    .search-box input:focus {
        outline: none;
        transform: translateY(-2px);
        box-shadow: 0 12px 40px var(--shadow);
    }

    .filter-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .filter-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 25px;
        background: rgba(255,255,255,0.2);
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .filter-btn:hover,
    .filter-btn.active {
        background: rgba(255,255,255,0.3);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .view-toggle {
        display: flex;
        background: rgba(255,255,255,0.2);
        border-radius: 25px;
        overflow: hidden;
    }

    .view-btn {
        padding: 10px 15px;
        border: none;
        background: transparent;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .view-btn.active {
        background: rgba(255,255,255,0.3);
    }

    .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
    }

    .gallery.list-view {
        grid-template-columns: 1fr;
    }

    .cheatsheet-card {
        background: var(--card-bg);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px var(--shadow);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
    }

    .cheatsheet-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 50px var(--shadow);
    }

    .card-image {
        width: 100%;
        height: 250px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .cheatsheet-card:hover .card-image {
        transform: scale(1.05);
    }

    .card-content {
        padding: 20px;
    }

    .card-title {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 8px;
        color: var(--text-color);
    }

    .card-category {
        display: inline-block;
        padding: 4px 12px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border-radius: 15px;
        font-size: 0.8rem;
        margin-bottom: 10px;
    }

    .card-description {
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.4;
    }

    .card-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
    }

    .action-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
    }

    .download-btn {
        background: #4CAF50;
        color: white;
    }

    .view-btn-card {
        background: #2196F3;
        color: white;
    }

    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    /* List View Styles */
    .gallery.list-view .cheatsheet-card {
        display: flex;
        height: 200px;
    }

    .gallery.list-view .card-image {
        width: 300px;
        height: 100%;
    }

    .gallery.list-view .card-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    /* Modal Styles - Fixed for full screen */
    .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: var(--modal-bg);
        backdrop-filter: blur(5px);
        overflow: auto;
    }

    .modal-content {
        position: relative;
        margin: 5vh auto;
        max-width: 90vw;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .modal-image {
        max-width: 100%;
        max-height: 70vh;
        object-fit: contain;
        border-radius: 10px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }

    .close {
        position: absolute;
        top: -50px;
        right: 20px;
        color: white;
        font-size: 35px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.3s ease;
        z-index: 10000;
    }

    .close:hover {
        color: #ccc;
    }

    .modal-info {
        background: var(--card-bg);
        color: var(--text-color);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin-top: 20px;
        max-width: 500px;
    }

    .favorite-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255,255,255,0.9);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
    }

    .favorite-btn:hover {
        background: white;
        animation: heartBeat 0.6s ease;
    }

    .favorite-btn.favorited {
        color: #e74c3c;
    }

    @keyframes heartBeat {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .nav {
            position: fixed;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--header-bg);
            flex-direction: column;
            padding: 1rem;
            gap: 1rem;
            transition: top 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .nav.active {
            top: 70px;
        }

        .mobile-menu-toggle {
            display: block;
        }

        .auth {
            order: -1;
        }

        .page-header h1 {
            font-size: 2rem;
        }

        .controls {
            flex-direction: column;
            align-items: stretch;
        }

        .filter-buttons {
            justify-content: center;
        }

        .gallery {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .gallery.list-view .cheatsheet-card {
            flex-direction: column;
            height: auto;
        }

        .gallery.list-view .card-image {
            width: 100%;
            height: 200px;
        }

        .modal-content {
            margin: 2vh auto;
            max-width: 95vw;
        }

        .modal-image {
            max-height: 60vh;
        }

        .close {
            top: -40px;
            right: 10px;
            font-size: 28px;
        }
    }

    /* Loading Animation */
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255,255,255,0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }
</style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">Java<span>Cracker</span></a>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
            <nav class="nav" id="mobileNav">
                 <a href="/learn">Learn Java</a>
                <a href="/questions">Practice Questions</a>
                <a href="/interviewquestions">Interview Guide</a>
                <a href="/cheatsheet">Cheat Sheets</a>
                <a href="/top5books">Top 5 Books</a>
                <a href="/projects">Projects</a>
                <a href="/blog">Blog</a>
            </nav>
            <div class="auth">
                <input type="checkbox" class="theme-checkbox" id="themeToggle" onchange="toggleTheme()" />
                <button class="btn login">Log in</button>
                <button class="btn signup">Sign up</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
            <h1>📚 Cheatsheet Gallery</h1>
            <p>Your comprehensive collection of programming cheatsheets</p>
        </div>

        <div class="controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="🔍 Search cheatsheets...">
            </div>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-category="all">All</button>
                <button class="filter-btn" data-category="java">Java</button>
                <button class="filter-btn" data-category="networking">Networking</button>
                <button class="filter-btn" data-category="css">CSS</button>
                <button class="filter-btn" data-category="react">React</button>
                <button class="filter-btn" data-category="git">Git</button>
            </div>

            <div class="view-toggle">
                <button class="view-btn active" data-view="grid">⊞</button>
                <button class="view-btn" data-view="list">☰</button>
            </div>
        </div>

        <div class="gallery" id="gallery">
            <!-- Cheatsheet cards will be generated here -->
        </div>
    </div>

    <!-- Modal for full-size image view -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img class="modal-image" id="modalImage">
            <div class="modal-info">
                <h3 id="modalTitle"></h3>
                <p id="modalDescription"></p>
            </div>
        </div>
    </div>

    <script>
        // Helper function to extract Google Drive file ID
        function getGoogleDriveFileId(url) {
            const match = url.match(/id=([a-zA-Z0-9_-]+)/) || url.match(/\/d\/([a-zA-Z0-9_-]+)/);
            return match ? match[1] : null;
        }

        // Sample cheatsheet data
        const cheatsheets = [
    {
        id: 1,
        title: "Java OOP",
        category: "java",
        description: "Covers core Object-Oriented Programming concepts like inheritance, encapsulation, polymorphism, and abstraction.",
        image: "https://i.ibb.co/nMypb6Ps/Java-OOP-Concepts-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/nMypb6Ps/Java-OOP-Concepts-Cheat-Sheet.webp"
    },
    {
        id: 2,
        title: "Java Keyword",
        category: "java",
        description: "List of all Java keywords with explanations and common usage examples.",
        image: "https://i.ibb.co/sJQym2zY/Java-Keywords-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/sJQym2zY/Java-Keywords-Cheat-Sheet.webp"
    },
    {
        id: 3,
        title: "HTTP Status Code",
        category: "networking",
        description: "List of all common HTTP status codes with their meanings and use cases.",
        image: "https://i.ibb.co/zVjWcHGB/HTTP-Status-Codes.webp",
        downloadUrl: "https://i.ibb.co/zVjWcHGB/HTTP-Status-Codes.webp"
    },
    {
        id: 4,
        title: "Java Thread Cheat Sheet",
        category: "java",
        description: "Quick reference to Java multithreading concepts like Thread class, Runnable, synchronization, and lifecycle.",
        image: "https://i.ibb.co/qYWRKvYR/Java-Threads-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/qYWRKvYR/Java-Threads-Cheat-Sheet.webp"
    },
    {
        id: 5,
        title: "Java I/O",
        category: "java",
        description: "Summary of Java I/O classes and methods including File, Stream, Reader, and Writer.",
        image: "https://i.ibb.co/1tf9p4HX/Java-IO-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/1tf9p4HX/Java-IO-Cheat-Sheet.webp"
    },
    {
        id: 6,
        title: "Java Exception Handling",
        category: "java",
        description: "Overview of try-catch blocks, throw, throws, and custom exception handling in Java.",
        image: "https://i.ibb.co/Xxx5dVTn/Java-Exception-Handling-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/Xxx5dVTn/Java-Exception-Handling-Cheat-Sheet.webp"
    },
    {
        id: 7,
        title: "Java Collection",
        category: "java",
        description: "Covers List, Set, Map, and Queue interfaces and their implementations in Java.",
        image: "https://i.ibb.co/NMrykdh/Java-Collections-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/NMrykdh/Java-Collections-Cheat-Sheet.webp"
    },
    {
        id: 8,
        title: "Java JDBC",
        category: "java",
        description: "Java Database Connectivity basics: Driver, Connection, Statement, PreparedStatement, and ResultSet.",
        image: "https://i.ibb.co/PZ5R93n8/Java-JDBC-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/PZ5R93n8/Java-JDBC-Cheat-Sheet.webp"
    },
    {
        id: 9,
        title: "SQL Cheat Sheet",
        category: "sql",
        description: "Essential SQL queries including SELECT, JOIN, GROUP BY, and subqueries.",
        image: "https://i.ibb.co/9HvmVktd/SQL-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/9HvmVktd/SQL-Cheat-Sheet.webp"
    },
    {
        id: 10,
        title: "Java String",
        category: "java",
        description: "Reference for Java String methods like concat, substring, equals, split, and immutability.",
        image: "https://i.ibb.co/27BSyPNN/Java-Strings-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/27BSyPNN/Java-Strings-Cheat-Sheet.webp"
    },
    {
        id: 11,
        title: "Java Control Flow Statement",
        category: "java",
        description: "Overview of if-else, switch, loops (for, while, do-while), and break/continue statements.",
        image: "https://i.ibb.co/rf0fgmw8/Java-Control-Flow-Statements-Cheat-Sheet-1.webp",
        downloadUrl: "https://i.ibb.co/rf0fgmw8/Java-Control-Flow-Statements-Cheat-Sheet-1.webp"
    },
    {
        id: 12,
        title: "Java Array",
        category: "java",
        description: "Cheat sheet on Java array creation, iteration, and methods for manipulation.",
        image: "https://i.ibb.co/d4KqKxyH/Java-Array-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/d4KqKxyH/Java-Array-Cheat-Sheet.webp"
    },
    {
        id: 13,
        title: "CSS FlexBox",
        category: "css",
        description: "Master CSS Flexbox layout with syntax, properties, and use-case examples.",
        image: "https://i.ibb.co/pjq81Cch/CSS-Cheat-Sheet.webp",
        downloadUrl: "https://i.ibb.co/pjq81Cch/CSS-Cheat-Sheet.webp"
    }
];


        let filteredCheatsheets = [...cheatsheets];
        let currentView = 'grid';

        // Initialize the gallery
        function initGallery() {
            renderCheatsheets();
            setupEventListeners();
            loadTheme();
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').checked = true;
            }
        }

        // Toggle theme
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');
            
            if (themeToggle.checked) {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            } else {
                html.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
            }
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            const nav = document.getElementById('mobileNav');
            nav.classList.toggle('active');
        }

        // Render cheatsheets
        function renderCheatsheets() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';

            filteredCheatsheets.forEach(cheatsheet => {
                const card = createCheatsheetCard(cheatsheet);
                gallery.appendChild(card);
            });
        }

        // Create cheatsheet card
        function createCheatsheetCard(cheatsheet) {
            const card = document.createElement('div');
            card.className = 'cheatsheet-card';
            card.innerHTML = `
                <button class="favorite-btn" onclick="toggleFavorite(${cheatsheet.id})">
                    ${localStorage.getItem('favorites') && JSON.parse(localStorage.getItem('favorites')).includes(cheatsheet.id) ? '♥' : '♡'}
                </button>
                <img src="${cheatsheet.image}" alt="${cheatsheet.title}" class="card-image" 
                     onclick="openModal('${cheatsheet.image}', '${cheatsheet.title}', '${cheatsheet.description}')"
                     onerror="this.onerror=null;this.src='https://placehold.co/600x400/CCCCCC/666666?text=Image+Not+Found';">
                <div class="card-content">
                    <div class="card-category">${cheatsheet.category}</div>
                    <h3 class="card-title">${cheatsheet.title}</h3>
                    <p class="card-description">${cheatsheet.description}</p>
                    <div class="card-actions">
                        <button class="action-btn download-btn" onclick="downloadCheatsheet('${cheatsheet.downloadUrl}', '${cheatsheet.title}')">
                        👁️ View / Download
                        </button>
                    </div>
                </div>
            `;
            return card;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', handleSearch);

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', handleFilter);
            });

            // View toggle
            document.querySelectorAll('.view-toggle .view-btn').forEach(btn => {
                btn.addEventListener('click', handleViewToggle);
            });

            // Modal close
            document.querySelector('.close').addEventListener('click', closeModal);
            document.getElementById('imageModal').addEventListener('click', function(e) {
                if (e.target === this) closeModal();
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                const nav = document.getElementById('mobileNav');
                const toggle = document.querySelector('.mobile-menu-toggle');

                if (!nav.contains(event.target) && !toggle.contains(event.target)) {
                    nav.classList.remove('active');
                }
            });

            // Close mobile menu on window resize
            window.addEventListener('resize', function() {
                const nav = document.getElementById('mobileNav');
                if (window.innerWidth > 768) {
                    nav.classList.remove('active');
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    document.getElementById('mobileNav').classList.remove('active');
                }
            });
        }

        // Handle search
        function handleSearch(e) {
            const searchTerm = e.target.value.toLowerCase();
            filteredCheatsheets = cheatsheets.filter(sheet => 
                sheet.title.toLowerCase().includes(searchTerm) ||
                sheet.description.toLowerCase().includes(searchTerm) ||
                sheet.category.toLowerCase().includes(searchTerm)
            );
            renderCheatsheets();
        }

        // Handle filter
        function handleFilter(e) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');

            const category = e.target.dataset.category;
            if (category === 'all') {
                filteredCheatsheets = [...cheatsheets];
            } else {
                filteredCheatsheets = cheatsheets.filter(sheet => sheet.category === category);
            }
            renderCheatsheets();
        }

        // Handle view toggle
        function handleViewToggle(e) {
            document.querySelectorAll('.view-toggle .view-btn').forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');

            currentView = e.target.dataset.view;
            const gallery = document.getElementById('gallery');
            
            if (currentView === 'list') {
                gallery.classList.add('list-view');
            } else {
                gallery.classList.remove('list-view');
            }
        }

        // Open modal - Fixed for full screen
        function openModal(imageSrc, title, description) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');

            modalImage.src = imageSrc;
            modalTitle.textContent = title;
            modalDescription.textContent = description;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scroll
        }

        // Close modal
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore background scroll
        }

        // Toggle favorite
        function toggleFavorite(id) {
            const btn = event.target;
            btn.classList.toggle('favorited');
            btn.textContent = btn.classList.contains('favorited') ? '♥' : '♡';
            
            // You can add logic here to save favorites to localStorage
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            if (btn.classList.contains('favorited')) {
                favorites.push(id);
            } else {
                const index = favorites.indexOf(id);
                if (index > -1) favorites.splice(index, 1);
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        // Download cheatsheet
        function downloadCheatsheet(url, title) {
            if (!url || url === '#') {
                // Using a custom message box instead of alert()
                const modal = document.getElementById('imageModal'); // Reusing the modal for a message
                const modalImage = document.getElementById('modalImage');
                const modalTitle = document.getElementById('modalTitle');
                const modalDescription = document.getElementById('modalDescription');

                modalImage.src = ''; // Clear image
                modalTitle.textContent = 'Download Not Available';
                modalDescription.textContent = 'A direct download link is not available for this cheatsheet. Please try viewing it directly if an image is displayed.';
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                return;
            }

            const link = document.createElement('a');
            link.href = url;
            // Attempt to set a more descriptive download filename
            link.download = title.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.png'; // Sanitize title for filename
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }


        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initGallery);
    </script>
</body>
</html>
